<!--
SPDX-FileCopyrightText: Copyright (C) 2020 Opal Health Informatics Group at the Research Institute of the McGill University Health Centre <john.kildea@mcgill.ca>

SPDX-License-Identifier: AGPL-3.0-or-later
-->

<!--Search Form to enter patient registration code, RAMQ and check for right patient information-->

<form class="p-4 mb-0 bg-light mb-md-2 rounded" name="searchForm" ng-submit="vm.searchFormSubmit()" novalidate>

    <!--Page title-->
    <div class="text-muted">
        <h4 class="font-weight-bold">{{'SEARCH.STEPS' | translate}}{{'SEARCH.TITLE' | translate}}</h4>
    </div>

    <!--Instruction to follow-->
    <div class="d-flex justify-content-between ">
        <div class="text-muted mr-2"><label>{{'SEARCH.INSTRUCTION' | translate}} <a href="#!/welcomePage">{{ 'SEARCH.INSTRUCTION_LINK' | translate }}</a>.</label></div>
    </div>

    <!--Horizontal line-->
    <hr class="bg-opal mb-3 mb-md-2">

    <!--Form section-->
    <div class="form-row mb-0 mb-md-2 mt-md-4">
        <div class="form-group col-md-6 col-sm-12">
            <label for="patientId" class="font-weight-bold text-muted">{{'SEARCH.FIELDNAMES.PATIENTID' |
                translate}}</label>
            <i class="fas fa-info-circle fa-icon-cursor text-muted" data-trigger="click" data-toggle="tooltip" data-placement="bottom" data-html="true"
                title="{{'TOOLTIP.PATIENTID_TITLE1' | translate}}" tooltip></i>
            <input type="text" name="patientId" ng-model="vm.formData.patientId" ng-change="vm.validatePatientId()"
                ng-class="{
                           'is-invalid':(vm.formData.patientIdFormat.status == 'invalid'),
                           'is-valid': (vm.formData.patientIdFormat.status == 'valid')}" class="form-control"
                tabindex="1" required autofocus>
            <!--Display error if registration code format or length is inappropriate-->
            <div ng-show="vm.formData.patientIdFormat.status == 'invalid'">
                <small class="text-danger font-weight-bold">{{vm.formData.patientIdFormat.message}}</small>
            </div>
        </div>

        <div class="form-group col-md-6 col-sm-12">
            <label for="registrationcode" class="font-weight-bold text-muted">{{'SEARCH.FIELDNAMES.REGISTRATIONCODE' |
                translate}}</label>
            <i class="fas fa-info-circle fa-icon-cursor text-muted" data-toggle="tooltip" data-placement="top" data-html="true" title="{{'TOOLTIP.REGISTRATIONCODE' | translate}}" tooltip></i>
            <input type="text" name="registrationCode" ng-model="vm.formData.formFieldsData.registrationCode"
                ng-change="vm.validateRegistrationCode()" ng-class="{
                           'is-invalid':(vm.formData.codeFormat.status == 'invalid'),
                           'is-valid': (vm.formData.codeFormat.status == 'valid')}" class="form-control" tabindex="2"
                required>

            <!--Display error if registration code field is blank or format is inappropriate-->
            <div ng-show="vm.formData.codeFormat.status == 'invalid'">
                <small class="text-danger font-weight-bold">{{vm.formData.codeFormat.message}}</small>
            </div>
        </div>
    </div>

    <!--Display error if any fields has a blank value-->
    <div ng-hide="vm.sharedErrorMessage">
        <div class="form-row mt-4">
            <div class="form-group col-md-12 col-sm-12">
                <small class="text-danger font-weight-bold">{{'SHARED.ERRORMESSAGE' | translate}}</small>
            </div>
        </div>
    </div>

    <!--Navigation button-->
    <div class="row">
        <div class="form-group col-md-12 col-xs-12 d-flex justify-content-center mt-3 mt-md-4">
            <button type="submit" class="btn btn-secondary text-white mr-2 px-3 px-md-5" tabindex="3">
                <!--<button type="submit" class="btn btn-secondary text-white mr-2 px-5" tabindex="4" ng-disabled="vm.searchFormValid">-->
                {{'FORM.BUTTONS.NEXT' | translate}} <i class="far fa-arrow-alt-circle-right pl-1"></i>
            </button>
        </div>
    </div>

</form>
